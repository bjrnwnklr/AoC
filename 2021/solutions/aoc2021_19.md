# Rotation and Transformation matrix

[Spatial Transformation Matrices](https://www.brainvoyager.com/bv/doc/UsersGuide/CoordsAndTransforms/SpatialTransformationMatrices.html)

# Numpy

Rotation matrix:

```python
R1 = np.eye(4)
R1[0, 0] = -1
R1[2, 2] = -1

R1
array([[-1.,  0.,  0.,  0.],
       [ 0.,  1.,  0.,  0.],
       [ 0.,  0., -1.,  0.],
       [ 0.,  0.,  0.,  1.]])
```

Translation matrix:

```python
T = np.eye(4)
T[:3,3] = [68, -1246, -43]

T
array([[ 1.000e+00,  0.000e+00,  0.000e+00,  6.800e+01],
       [ 0.000e+00,  1.000e+00,  0.000e+00, -1.246e+03],
       [ 0.000e+00,  0.000e+00,  1.000e+00, -4.300e+01],
       [ 0.000e+00,  0.000e+00,  0.000e+00,  1.000e+00]])
```

Multiplying a column vector with the rotation and then translate:

```python
a = np.array([[686, 422, 578, 1]])

R1.dot(a)
T.dot(R1.dot(a))
```

Applying rotation to multiple column vectors and subtract from another column vector:

```python
b0 = np.array([[[-618, -824, -621,    1]],
       [[-537, -823, -458,    1]]])

b1 = np.array([[[686, 422, 578,   1]],
       [[605, 423, 415,   1]]])

for x, y in zip(b0, b1):
    print(x.T - R1.dot(y.T))
```
